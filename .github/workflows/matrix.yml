name: Matrix Example

on:
  workflow_dispatch: {}
  push:
    branches: [main]
    paths:
      - .github/workflows/matrix.yml

jobs:
  build:
    permissions:
      contents: read
      packages: write
      attestations: write
      id-token: write
    strategy:
      matrix:
        plugins:
          - plugin-repository: callumalpass/tasknotes
            commit: d0271522cae96cf9b5ab6cb6f8bf2c7ba4ad24b2
            directory: ""
            build-directory: ""
          - plugin-repository: SilentVoid13/Templater
            commit: 7b78af918be30b4d3c3402fb3deb74bb440d3844
            directory: ""
            build-directory: ""
    uses: ./.github/workflows/build.yml
    with:
      plugin-repository: ${{ matrix.plugins.plugin-repository }}
      plugin-commit: ${{ matrix.plugins.commit }}
      plugin-directory: ${{ matrix.plugins.directory }}
      build-directory: ${{ matrix.plugins.build-directory }}
